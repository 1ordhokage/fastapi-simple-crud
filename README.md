# Задача: простой REST API

Требуется разработать простой REST API для взаимодействия с БД, которая хранит
информацию об автомобилях.

## Backend

Для успешной сдачи задания требуется удовлетворить функциональным требованиям к
решению. Выполнение нефункциональных требований повысит Вашу оценку при
прохождении данного вступительного испытания. Использование перечисленных
технологий является обязательным требованием к работе. Несоблюдение этих
требований повлечет к получению минимальной оценки.

### Функциональные требования

- Сервис должен подключаться к базе данных, которая хранит информацию об
автомобилях. О каждом автомобиле в БД хранится следующая информация:
  - Уникальный идентификатор - номер автомобиля;
  - Модель автомобиля;
  - Владелец автомобиля (серия-номер паспорта);
  - Пробег автомобиля в километрах;
- Сервис должен предоставлять REST API для взаимодействия с базой данных (CRUD):
  - GET `/car/{id}` - получить информацию об автомобиле по идентификатору;
  - GET `/car?page=&per_page=` - получить информацию о всех автомобилях, с
    учетом пагинации из query-параметров запроса, т.е. чтобы отправлять
    информацию не о всех автомобилях (т.к. их может быть очень много), нужно
    отправлять информацию об автомобилях из некоторого последовательного куска
    из списка автомобилей в БД;
  - POST `/car` - сохранить в БД информацию об автомобиле. Если автомобиль уже
    есть в БД, то заменить. Информация об автомобиле в теле запроса;
  - UPDATE `/car` - обновить информацию об автомобиле. В теле запроса передается
    сущность автомобиля, с единственным обязательным полем - идентификатором.
    Все остальные поля опциональные и если не присутствуют, то не обновляются в
    БД. Если автомобиля для обновления в базе нет, вернуть 404 NOT FOUND;
  - DELETE `/car/{id}` - удалить автомобиль по идентификатору. Если автомобиля
    нет, то вернуть 404 NOT FOUND;

### Нефункциональные требования

Эти требования не входят в базовую конфигурацию задания, но особо ценятся
дополнительно.

- Сервис должно быть возможно запустить посредством вызова команды
  `docker-compose up` из корня репозитория;
- Код должен быть качественно отформатирован;
- Код должен быть сопровожден документацией в формате docstring Google;
- К коду должна быть написана текстовая документация с возможность
  просмотра в браузере;
- Должны быть настроены миграции БД;
- API должен сопровождаться OpenAPI документацией, с описаниями для каждого
  запроса;
- Запросы должны валидироваться;
- Должно быть настроено логирование всех запросов приходящих в систему в
  stdout/stderr, а так же в файл. Для логов в файл нужно настроить retention и
  rotation;
- Должна быть настроена сборка логов в отдельный дашборд;
- Обернуть сервис в прокси nginx, при это допускаются запросы проходящие только
  через nginx;
- Добавить проверку на формат номера автомобиля, покрыть эту проверку тестами и
  автоматизировать тестирование посредством CI/CD (GitHub Actions);

### Требования к используемым технологиям

- Python (рекомендуемая версия 3.9+)
  - FastAPI
  - Pydantic
  - SQLAlchemy
  - Alembic
  - Loguru
- PostgreSQL
- Docker
- Nginx
- Prometheus
- GitHub



#  Запуск проекта based_cars

$ docker-compose up -d --build

$ docker-compose exec web alembic upgrade head

Sanity check: http://localhost:8000

Documentation: http://localhost:8000/docs

